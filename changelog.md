# NoNICK.js v4.0

## 全般
* 使用DBをmongoDBに変更しました。
* 各機能のメッセージのレイアウトを改良し、よりわかりやすくなりました。
* 新たに`/verify`、`/firstmessage`コマンドを追加しました。

### 🚪入退室メッセージ
* 入室メッセージの埋め込みの自由度を拡大しました。近い将来、退室メッセージを含め更にメッセージを自由に変更できるようにする予定です。

### 📢通報機能
* 受け取った通報の対応状況を視覚化できる「対応済み」「無視」ボタンを追加しました。
* 受け取った通報に対してモデレーター間と協議できるよう、受け取った通報にスレッドが作成されるようになりました。

### 🔗メッセージURL展開
* URLを展開しないチャンネルを設定できるようになりました。`/setting`から、「チャンネルの種類」と「チャンネル」の2つのオプションから設定できます。

### 📝イベントログ (旧: ログ機能)
* 他の機能と区別させるため、機能の名称を「イベントログ」に変更しました。
* 各イベントに対して、個別にチャンネルを設定できるようになりました。

### ✅自動認証レベル変更
* レベルを変更した際に送信するログをイベントログと分離し、個別に設定できるようになりました。

### 🔨/setting
* 「What's New」機能を廃止しました。
* 技術的な理由により、コマンドの形式を変更しました。

### 💬/embed
* タイムスタンプ、フィールドのインライン表示の編集に対応しました。
* カラーコードの設定に新しいオプションを追加しました。
* エディタ上では未対応ですが、`/embed import`による複数埋め込みのインポート・エキスポート・送信に対応しました。
* 新たに「埋め込みの編集」コンテキストを追加しました。これにより、以下の機能がサポートされるようになります。
  * 既存の埋め込みの編集・エクスポート
  * ロール付与コンポーネントの追加 (ボタン・セレクトメニュー)
  * URLボタンの追加
* 技術的な問題により、アバター画像やユーザー名をカスタマイズして埋め込みを送信することができなくなりました。(今後再度対応できないか開発を進めています)

### 🎨/reactionrole (→ /embed)
(この機能は`/embed`に移行しました。同じ機能を使用したい場合は、`/embed`で作成した埋め込みを右クリックし、`アプリ`→`埋め込みの編集`から`ロール付与(セレクトメニュー)の作成`を選択してください。)
* ロールの指定にロールIDがサポートされるようになりました。
* 既に追加されているロールを新しく追加する際に、実行をキャンセルするのではなく既存のオプションを削除してから追加するようになりました。
* 選択モードの切り替えをセレクトメニューの有無に関わらず変更できるようになりました。

### 🧪/verify
* 特定のステップを満たした際にロールを付与するパネルを作成します。
* コマンドに関する詳しい説明はこちら

### 🔎/firstmessage
* コマンドを実行したチャンネルの最初のメッセージのURLボタンを追加します。
* コマンドに関する詳しい説明はこちら
